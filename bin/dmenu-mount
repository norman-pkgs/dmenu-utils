#!/bin/zsh

# Get the drive to mount
partition=/dev/$(lsblk --list | grep part | grep -v / | awk '{print $1 " " $4}' | dmenu | awk '{print $1}')

# No partition? #exit
[[ $partition == "/dev/" ]] && exit 1

# If mount point exists in fstab mount and exit
mount $partition && exit 0

# Select a mount point through dmenu
mountpoint=$(cd /mnt && find * -maxdepth 1 -empty -type d | dmenu)

# If no selection exit
[[ $mountpoint == "" ]] && exit 1

# Make mount point to make sure it exists
sudo mkdir /mnt/$mountpoint

# Mount it
sudo mount $partition /mnt/$mountpoint

# Save it?
